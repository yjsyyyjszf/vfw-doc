Web API Output
==============

vNine Export allows users to quickly download raw market data as a csv file in one of two ways.

| The .csv (comma-separated values) file can simply be imported into Excel and viewed in varioius text editors.
| Although, perhaps most useful is the ability to programatically read the data in so easily.
| This versatility makes it ideal for many different use-cases.

Programmatically Processing the CSV
-----------------------------------


Essential Knowledge
~~~~~~~~~~~~~~~~~~~

- Read until the first comma on a line. That is the message key. If the key does not match anything your code recognizes, skip the entire line.

.. note:: (This allows new keys to be introduced to the exporter in the future without breaking your code)

- Check the FV (file version) message on the first line of the file to make sure your program is compatible with the version it describes.
- Fields never contain newlines or carriage returns, not even within quotes, so you can safely read one line at a time to capture an entire record.
- If a field intentionally contains leading whitespace, trailing whitespace, a comma, or a quotation mark, the entire field will be enclosed in quote marks.	
	- A. "˽˽˽gems,˽semi-precious,˽and˽""look-alikes""˽˽˽" (Before processing the CSV)
	- B. ˽˽˽gems,˽semi-precious,˽and˽"look-alikes"˽˽˽ (After processing the CSV)

.. note:: A is a single field that has leading whitespace, commas, a quoted term, and trailing whitespace... note:: In practice, very few messages contain quoted data, but you can anticipate that exchange instrument descriptions and user markup will likely contain commas and possibly even quotes within.- Do not assume the maximum length of a single line. For example, do not hard code a 1KB buffer length.- You can only ensure that your program has successfully processed everything once it processes an EO message.

Best Practices
~~~~~~~~~~~~~~

- You can ignore lines that are blank or contain only whitespace.
- You can ignore leading and trailing whitespace around unquoted fields. (That is: 1, 2 , 3 is the same as 1,2,3)- Simply ignore sections at the end of each line that your program doesn't understand. This allows new fields to be appended to the end of the line without breaking your code. (Keep in mind quoted commas)
- Dates are stored in YearMonthDay (YYYYMMDD) format. That means they can be read as integers with easy sorting mechanisms and little concern for ambiguities in regional formats.

Recommendations
~~~~~~~~~~~~~~~

- Display an alert if your program runs across an FC message of type ERROR or WARN.
- While many of the most common field types and values are described here, the exchange has the capability to change them. Your program should be able to handle unexpected field values gracefully.

General Notes
-------------

Time Resolution
~~~~~~~~~~~~~~~

The Vertex format supports nanosecond resolution. However, the final digits may be zero or some other pattern if the exchange does not output that many digits.

| Exchange server clocks are not synchronized with each other or some universal clock to the nanosecond.
| Therefore, the accuracy of timestamps can vary. Generally, timestamps within the same channel should be comparable to one another.| Timestamps default to UTC time, not your timezone nor the timezone of the exchange. Although, this can be manipulated.

Real vs Generated Messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A real message is a message that was literally received from that specific exchange. A generated message has the same format, but was assembled by Vertex from other message types to provide a consistent output. Real or generated messages have a field indicating their state.Vertex Exclusive Messages~~~~~~~~~~~~~~~~~~~~~~~~~~| Besides messages received from the exchange itself, the CSV file contains supplementary message types created by Vertex to make the file easier to process or more informative.
| For example, the file begins with a version message that is followed by a message with information aboutthe instrument. 
| Additionally, the file can include markup messages, which are comments about events made by your users on the vNine client or generated by Vertex Analytics analysis engines. 
| All Vertex exclusive messages are labeled as such in this documentation.Order IDs, Channel Sequences, and Instrument Sequences~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~| Each exchange has rules for when a number is changed, reused, or rolled over. Generally, you can expect that a sequence number is only unique for an instrument for a given day, for a given exchange. 
| Some exchanges retain order IDs across days and across order changes; other exchanges do not.